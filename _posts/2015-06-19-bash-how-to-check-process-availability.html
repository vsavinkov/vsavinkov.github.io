---
layout: post
title: 'Bash: how to check process availability'
date: '2015-06-19T11:30:00.005+03:00'
author: Daemonic
tags:
- bash
modified_time: '2015-11-18T20:17:57.327+03:00'
blogger_id: tag:blogger.com,1999:blog-2174521382944768960.post-6982687252452663009
blogger_orig_url: http://my-irregularity.blogspot.com/2015/06/bash-how-to-check-process-availability.html
---

<span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">If you have script which deploys some product / runs some service, you may need to check whether it's actually started. For example:</span><br /><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">#check if some process is running</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">if [ `ps aux | grep $PROCESS_NAME -c` == '0' ]; then</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; echo <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">Process not </span>started</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">else</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; echo <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">Process</span> started!</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">fi</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">#check if some application occupied some port</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">l_TELNET=`echo "quit" | telnet 127.0.0.1 $PORT_NUMBER | grep "Escape character is"`</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">if [ "$?" -ne 0 ]; then</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp;sleep 1</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">fi</span><br /><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">But what if your script need to wait until application started? I suggest to use recurrent function call to do that:</span><br /><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">check_whether_service_started(){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; sleep 3</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; if [ `ps aux | grep $PROCESS_NAME&nbsp;-c` == '0' ]; then</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; echo Waiting for process to start...</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; check_whether_service_started</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; else</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; echo Process&nbsp;is running.</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; fi</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">}</span><br /><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;helvetica neue&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">It will wait for 3 seconds and recheck process availability until it will be running.</span>